(this["webpackJsonppostcard-builder"]=this["webpackJsonppostcard-builder"]||[]).push([[0],{17:function(e,t,a){e.exports=a(25)},22:function(e,t,a){},25:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),c=a(15),r=a.n(c),s=(a(22),a(4)),i=a(9),o=a(12),m=a(10);a(27),a(28);m.a.initializeApp({apiKey:"AIzaSyAhtgCG34-kuOu2kwqf7wYlKT13RuNnxhE",authDomain:"instaclone-e7884.firebaseapp.com",projectId:"instaclone-e7884",storageBucket:"instaclone-e7884.appspot.com",messagingSenderId:"757794485689",appId:"1:757794485689:web:3aa699217f43359816b268"});var u=m.a.storage(),d=m.a.firestore(),p=m.a.firestore.FieldValue.serverTimestamp,g=function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),l=a[0],c=a[1];return Object(n.useEffect)((function(){var t=d.collection(e).orderBy("createdAt","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(o.a)(Object(o.a)({},e.data()),{},{id:e.id}))})),c(t)}));return function(){return t()}}),[e]),{docs:l}},E=function(e,t){d.collection(e).doc(t).delete().then((function(){console.log("successfully deleted")})).catch((function(e){console.log("error removing documnet: ",e)}))},f=function(e){var t=e.setModal,a=e.setSelectedImg,n=e.handleClick,c=g("images").docs;return l.a.createElement("div",{className:"img-grid",onClick:n},c&&c.map((function(e){return l.a.createElement(i.a.div,{className:"img-wrap",layout:!0,whileHover:{opacity:1},key:e.id},l.a.createElement(i.a.img,{src:e.url,alt:"uploaded pic",initial:{opacity:0},animate:{opacity:1},transition:{delay:1},onClick:function(){a(e.url),t(!1)}}),l.a.createElement("div",{className:"removeImage",onClick:function(){return t="images",a=e.id,void E(t,a);var t,a}},"x"))})),setTimeout((function(){return c.length<1?(console.log("nothin"),l.a.createElement("div",{style:{gridColumn:"1 / span 4",gridRow:"3",color:"white",fontSize:"5rem",margin:"0 auto",textAlign:"center"}}," Please Upload an Image ")):null}),2e3))},v=function(e){var t=e.setModal,a=e.setSelectedImg;function n(e){(e.target.classList.contains("img-grid")||e.target.classList.contains("backdrop"))&&t(!1)}return l.a.createElement(l.a.Fragment,null,l.a.createElement(i.a.div,{className:"backdrop",onClick:n,initial:{opacity:0},animate:{opacity:1}},l.a.createElement(i.a.div,{initial:{y:"-100vh"},animate:{y:"0"}},l.a.createElement(f,{setSelectedImg:a,setModal:t,handleClick:n}))))},b=a(11),j=a.n(b),h=a(16),O=function(e){var t=Object(n.useState)(0),a=Object(s.a)(t,2),l=a[0],c=a[1],r=Object(n.useState)(null),i=Object(s.a)(r,2),o=i[0],m=i[1],g=Object(n.useState)(null),E=Object(s.a)(g,2),f=E[0],v=E[1];return Object(n.useEffect)((function(){var t=u.ref(e.name),a=d.collection("images");t.put(e).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;c(t)}),(function(e){m(e)}),Object(h.a)(j.a.mark((function e(){var n,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDownloadURL();case 2:return n=e.sent,console.log(n),l=p(),e.next=7,a.add({url:n,createdAt:l});case 7:v(n);case 8:case"end":return e.stop()}}),e)}))))}),[e]),{progress:l,url:f,error:o}},N=function(e){var t=e.file,a=e.setFile,c=e.setModal,r=O(t),s=r.url,o=r.progress;return Object(n.useEffect)((function(){s&&(a(null),c(!0))}),[s,a]),l.a.createElement(i.a.div,{className:"progress-bar",initial:{width:0},animate:{width:o+"%"}})},S=function(e){var t=e.setModal,a=Object(n.useState)(null),c=Object(s.a)(a,2),r=c[0],i=c[1],o=Object(n.useState)(null),m=Object(s.a)(o,2),u=m[0],d=m[1],p=["image/png","image/jpeg"];return l.a.createElement("form",{className:"uploadForm",onChange:function(e){var t=e.target.files[0];t&&p.includes(t.type)?(i(t),d("")):(i(null),d("Please select an image file (png or jpg)"))}},l.a.createElement("label",{className:"uploadFile"},l.a.createElement("span",{className:""},"+"),l.a.createElement("input",{type:"file"})),l.a.createElement("div",{className:"output"},u&&l.a.createElement("div",{className:"error"},u),r&&l.a.createElement("div",null,"uploading ".concat(r.name,"...")," "),r&&l.a.createElement(N,{file:r,setModal:t,setFile:i})))};var C=function(e){var t=e.selectedImg,a=e.setModal,c=e.setSelectedImg,r=Object(n.useState)(!1),i=Object(s.a)(r,2),o=i[0],m=i[1],u=Object(n.useState)(""),d=Object(s.a)(u,2),p=d[0],g=d[1],E=Object(n.useState)(""),f=Object(s.a)(E,2),v=f[0],b=f[1],j=Object(n.useState)("/stamp.jpg"),h=Object(s.a)(j,2),O=h[0],N=h[1],C=Object(n.useState)(200),y=Object(s.a)(C,2),k=y[0],w=y[1],I=Object(n.useState)(80),x=Object(s.a)(I,2),M=x[0],F=x[1];function A(e){N(e.target.src)}return l.a.createElement(l.a.Fragment,null,o&&l.a.createElement(S,{setSelectedImg:c,setModal:a}),l.a.createElement("div",{className:"genCardContainer"},o&&l.a.createElement("div",{className:"postCardContainerBack"},l.a.createElement("div",{className:"post",onClick:function(){a(!0)}},t?l.a.createElement("img",{src:t}):l.a.createElement("p",null," Click here to select image"))),!o&&l.a.createElement("div",{className:"postCardContainerFront"},l.a.createElement("div",{className:"stamps"},l.a.createElement("div",null,"Select Stamp ",l.a.createElement("br",null),l.a.createElement("span",{style:{fontSize:"2rem",fontWeight:"bold"}}," \u21d3 ")),l.a.createElement("img",{src:"/stamp2.jpg",alt:"stamp",onClick:function(e){return A(e)},style:{width:"80px"}}),l.a.createElement("img",{src:"/stamp3.jpg",alt:"stamp",onClick:function(e){return A(e)},style:{width:"80px"}}),l.a.createElement("img",{src:"/stamp4.jpg",alt:"stamp",onClick:function(e){return A(e)},style:{width:"80px"}}),l.a.createElement("img",{src:"/stamp5.jpg",alt:"stamp",onClick:function(e){return A(e)},style:{width:"80px"}})),l.a.createElement("div",{className:"post"},l.a.createElement("div",{className:"message"},l.a.createElement("textarea",{value:v,placeholder:"add message here",onChange:function(e){var t=e.target.value;t.length>=200&&(t=t.slice(0,200)),w(200-t.length),b(t)}}),l.a.createElement("span",{className:"line line1"}," "),l.a.createElement("span",{className:"line line2"},"  "),l.a.createElement("span",{className:"line line3"},"  "),l.a.createElement("span",{className:"line line4"},"  "),l.a.createElement("span",{className:"line line5"},"  "),l.a.createElement("span",{className:"line line6"},"  "),l.a.createElement("span",{className:"line line7"},"  "),l.a.createElement("span",null,"".concat(k,"/").concat(200)," ")),l.a.createElement("div",{className:"address"},l.a.createElement("textarea",{value:p,placeholder:"Address here",onChange:function(e){var t=e.target.value;t.length>=80&&(t=t.slice(0,80)),F(80-t.length),g(t)}}),l.a.createElement("span",{className:"line line1"}," "),l.a.createElement("span",{className:"line line2"},"  "),l.a.createElement("span",{className:"line line3"},"  "),l.a.createElement("span",{className:"line line4"},"  "),l.a.createElement("span",null," ","".concat(M,"/").concat(80)," ")),l.a.createElement("div",{className:"stamp"},l.a.createElement("img",{src:O,alt:"stamp"})))),l.a.createElement("button",{className:"flipCard",onClick:function(){m(!o)}},l.a.createElement("div",null," Flip PostCard "))))},y=function(){return l.a.createElement("div",{className:"title"},l.a.createElement("h2",null,"PostCard Builder"))};var k=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(null),i=Object(s.a)(r,2),o=i[0],m=i[1];return l.a.createElement("div",{className:"App"},l.a.createElement(y,null),l.a.createElement(C,{selectedImg:o,setSelectedImg:m,setModal:c}),a&&l.a.createElement(v,{setSelectedImg:m,setModal:c}))};r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(k,null)),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.0587a21f.chunk.js.map